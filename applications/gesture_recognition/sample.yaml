sample:
  description: Gesture Recognition application
  name: gesture recognition

common:
  sysbuild: true
  tags:
    - ci_build
    - sysbuild
    - ci_applications_gesture_recognition
  harness: console
  harness_config:
    type: multi_line
    ordered: false
    regex:
      - "Booting MCUboot"
      - "I: Starting bootloader"
      - "I: Jumping to the first image slot"
      - "Booting nRF Connect SDK"
      - "Bluetooth initialized"
      - "Advertising successfully started"
      - "nRF Edge AI Gestures Recognition Demo:"
      - "nRF Edge AI Runtime Version:"
      - "nRF Edge AI Lab Solution id:"

tests:
  applications.gesture_recognition.hid.zdebug:
    build_only: true
    platform_allow:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    integration_platforms:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
  applications.gesture_recognition.nus.zdebug:
    build_only: true
    platform_allow:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    integration_platforms:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    extra_args:
      - CONFIG_DATA_COLLECTION_MODE=y
      - CONFIG_BLE_MODE_NUS=y
  applications.gesture_recognition.gatt.zdebug:
    build_only: true
    platform_allow:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    integration_platforms:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    extra_args:
      - CONFIG_BLE_MODE_GATT_CUSTOM=y
  applications.gesture_recognition.none.zdebug:
    build_only: true
    platform_allow:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    integration_platforms:
      - thingy53/nrf5340/cpuapp
      - nrf54l15tag/nrf54l15/cpuapp
    extra_args:
      - CONFIG_BLE_MODE_NONE=y
  applications.gesture_recognition.hid.zdebug.uart:
    platform_allow:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    integration_platforms:
      - nrf54lm20dk/nrf54lm20a/cpuapp
  applications.gesture_recognition.nus.zdebug.uart:
    platform_allow:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    integration_platforms:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    extra_args:
      - CONFIG_DATA_COLLECTION_MODE=y
      - CONFIG_BLE_MODE_NUS=y
  applications.gesture_recognition.gatt.zdebug.uart:
    platform_allow:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    integration_platforms:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    extra_args:
      - CONFIG_BLE_MODE_GATT_CUSTOM=y
  applications.gesture_recognition.none.zdebug.uart:
    platform_allow:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    integration_platforms:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    extra_args:
      - CONFIG_BLE_MODE_NONE=y
    harness: console
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "Booting MCUboot"
        - "I: Starting bootloader"
        - "I: Jumping to the first image slot"
        - "Booting nRF Connect SDK"
        - "nRF Edge AI Gestures Recognition Demo:"
        - "nRF Edge AI Runtime Version:"
        - "nRF Edge AI Lab Solution id:"
  # This configuration is not working yet.
  # It's added so that shield is correctly rendered in the documentation.
  applications.gesture_recognition.shield:
    build_only: true
    platform_allow:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    integration_platforms:
      - nrf54lm20dk/nrf54lm20a/cpuapp
    extra_args:
      - gesture_recognition_SHIELD=pca63568
